<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Recicla Per√∫ ‚Äî Aprende y Juega</title>
  <style>
    :root{
      --bg:#0b1220; --card:#121b2e; --muted:#7fa3ff; --accent:#50fa7b; --warn:#ffb84d; --danger:#ff6978; --text:#e8eeff;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:radial-gradient(1200px 800px at 0% 0%,#17223f 0%,#0b1220 40%,#070d19 100%);color:var(--text)}
    header{padding:28px 20px 8px; text-align:center}
    h1{margin:0;font-weight:800;letter-spacing:.3px}
    .subtitle{opacity:.9;margin-top:6px}
    main{max-width:1100px;margin:0 auto;padding:24px}
    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:22px}
    @media (max-width: 950px){.grid{grid-template-columns:1fr;}}
    /* Card */
    .card{background:linear-gradient(180deg,#141f38 0%, #0f1830 100%);border:1px solid #20315a;box-shadow:0 10px 30px rgba(0,0,0,.35);border-radius:16px}
    .card>header{padding:16px 18px;border-bottom:1px solid #233a6a}
    .card>header h2{margin:.2rem 0; font-size:1.25rem}
    .content{padding:16px 18px}
    .pill{display:inline-block;padding:.2rem .55rem;border:1px solid #2a4787;border-radius:999px;font-size:.75rem;color:#9fc3ff;background:rgba(93,134,255,.12)}
    .facts li{margin:.45rem 0}

    /* Game */
    .game-wrap{padding:16px}
    .hud{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:10px}
    .badge{background:#1c2a4f;border:1px solid #294581;padding:.35rem .6rem;border-radius:10px}
    .accent{color:var(--accent)}
    .btn{appearance:none;border:1px solid #3a5bb4;background:#1b2a55;color:#d7e3ff;border-radius:10px;padding:.5rem .8rem;font-weight:600;cursor:pointer}
    .btn:hover{filter:brightness(1.1)}
    .playfield{display:grid;grid-template-columns:1fr;gap:16px}
    .items{min-height:140px;padding:12px;border:2px dashed #3458a1;border-radius:14px;display:flex;flex-wrap:wrap;gap:10px;background:rgba(24,40,86,.35)}
    .item{user-select:none;padding:.45rem .6rem;border-radius:12px;border:1px solid #3c5fb0;background:linear-gradient(180deg,#26427e,#1b2d5c);color:#e9f1ff;font-weight:700;letter-spacing:.2px;display:inline-flex;align-items:center;gap:.45rem}
    .item[draggable="true"]{cursor:grab}
    .item:active{cursor:grabbing}
    .bins{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
    @media (max-width: 720px){.bins{grid-template-columns:repeat(2,1fr)}}
    .bin{border:2px solid #395fb8;border-radius:14px;padding:10px;min-height:120px;background:linear-gradient(180deg,#152550,#101b3a);display:flex;flex-direction:column}
    .bin header{display:flex;align-items:center;gap:8px;margin-bottom:8px}
    .bin .drop{flex:1;min-height:90px} 
    .bin .name{font-weight:800}
    .bin .emoji{font-size:22px}
    .bin.accept{outline:3px dashed var(--muted);outline-offset:2px}
    .bin.correct{box-shadow:0 0 0 2px var(--accent) inset}
    .bin.wrong{box-shadow:0 0 0 2px var(--danger) inset}

    .footer{opacity:.8;text-align:center;padding:20px}
    .tip{font-size:.9rem;opacity:.9}
    .legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
    .legend span{border:1px solid #2a4787;border-radius:999px;padding:.2rem .5rem;font-size:.75rem;background:rgba(93,134,255,.08)}
  </style>
</head>
<body>
  <header>
    <h1>‚ôªÔ∏è Recicla Per√∫ ‚Äî Aprende y Juega</h1>
    <p class="subtitle">Un mini‚Äëjuego para clasificar residuos en el contenedor correcto.</p>
  </header>

  <main class="grid">

    <section class="card game" aria-labelledby="game-title">
      <header>
        <h2 id="game-title">Juego: arrastra la basura al tacho correcto</h2>
        <span class="pill">Drag & Drop</span>
      </header>
      <div class="content game-wrap">
        <div class="hud" role="group" aria-label="Indicadores de juego">
          <div class="badge">Puntaje: <span id="score" class="accent">0</span></div>
          <div class="badge">Intentos: <span id="attempts">0</span></div>
          <div class="badge">Restantes: <span id="remaining">0</span></div>
          <button class="btn" id="btn-new" aria-label="Nuevo juego">Nuevo juego</button>
        </div>

        <div class="playfield">
          <div class="items" id="items" aria-label="Residuos para clasificar"></div>
          <div class="bins" id="bins" aria-label="Contenedores de reciclaje"></div>
        </div>

        <div class="legend" aria-hidden="true"></div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>Desarrollado para fines educativos. Insp√≠rate, modifica y comparte en tu comunidad.</p>
  </footer>

  <script>
    // ----- Datos del juego -----
    const CATEGORIES = [
      { key:'papel',   name:'Papel y Cart√≥n', color:'#7fb3ff', emoji:'üìÑ', examples:['Peri√≥dico','Caja de cereal','Cuaderno usado','Cart√≥n limpio'] },
      { key:'plastico',name:'Pl√°stico',       color:'#ffd166', emoji:'üß¥', examples:['Botella PET','Bolsa limpia','Tapita','Envase de yogur'] },
      { key:'vidrio',  name:'Vidrio',         color:'#80e7c0', emoji:'üçæ', examples:['Botella de vidrio','Frasco','Copa rota (envuelta)'] },
      { key:'metal',   name:'Metal',          color:'#bdb2ff', emoji:'ü•´', examples:['Lata de gaseosa','Lata de at√∫n','Papel aluminio limpio'] },
      { key:'organico',name:'Org√°nico',       color:'#95d67b', emoji:'üçå', examples:['C√°scara de pl√°tano','Restos de ensalada','Caf√© usado'] }
    ];

    const POOL = [
      {label:'Botella PET', type:'plastico', emoji:'ü•§'},
      {label:'Revista', type:'papel', emoji:'üìò'},
      {label:'Lata de gaseosa', type:'metal', emoji:'ü•´'},
      {label:'Frasco de vidrio', type:'vidrio', emoji:'ü´ô'},
      {label:'C√°scara de pl√°tano', type:'organico', emoji:'üçå'},
      {label:'Caja de cart√≥n', type:'papel', emoji:'üì¶'},
      {label:'Tapita pl√°stica', type:'plastico', emoji:'üß∑'},
      {label:'Papel aluminio limpio', type:'metal', emoji:'üßª'},
      {label:'Botella de vidrio', type:'vidrio', emoji:'üçæ'},
      {label:'Restos de comida', type:'organico', emoji:'üçΩÔ∏è'},
      {label:'Envase de yogur', type:'plastico', emoji:'ü•£'},
      {label:'Peri√≥dico', type:'papel', emoji:'üóûÔ∏è'}
    ];

    const itemsEl = document.getElementById('items');
    const binsEl = document.getElementById('bins');
    const scoreEl = document.getElementById('score');
    const attemptsEl = document.getElementById('attempts');
    const remainingEl = document.getElementById('remaining');
    const btnNew = document.getElementById('btn-new');

    let score=0, attempts=0, remaining=0;

    function shuffle(arr){ return arr.sort(()=>Math.random()-.5); }

    function createBins(){
      binsEl.innerHTML='';
      CATEGORIES.forEach(cat=>{
        const bin = document.createElement('div');
        bin.className='bin';
        bin.style.borderColor = shade(cat.color, -15);
        bin.dataset.accept = cat.key;
        bin.innerHTML = `<header><span class="emoji">${cat.emoji}</span><span class="name">${cat.name}</span></header><div class="drop"></div>`;
        enableDrop(bin);
        binsEl.appendChild(bin);
      });
    }

    function createItems(){
      itemsEl.innerHTML='';
      const candidates = shuffle(POOL).slice(0,10);
      remaining = candidates.length; updateHUD();
      candidates.forEach(it=>{
        const el = document.createElement('div');
        el.className='item';
        el.draggable=true;
        el.dataset.type = it.type;
        el.setAttribute('aria-grabbed','false');
        el.innerHTML = `<span>${it.emoji}</span> <span>${it.label}</span>`;
        enableDrag(el);
        itemsEl.appendChild(el);
      });
    }

    function enableDrag(el){
      el.addEventListener('dragstart', e=>{
        e.dataTransfer.setData('text/plain', el.dataset.type);
        e.dataTransfer.setData('text/id', Math.random().toString(36).slice(2));
        e.dataTransfer.effectAllowed='move';
        el.classList.add('dragging');
      });
      el.addEventListener('dragend', ()=>{
        el.classList.remove('dragging');
      });
    }

    function enableDrop(bin){
      ['dragenter','dragover'].forEach(type=>{
        bin.addEventListener(type, e=>{
          e.preventDefault();
          bin.classList.add('accept');
        });
      });
      ['dragleave','drop'].forEach(type=>{
        bin.addEventListener(type, ()=> bin.classList.remove('accept'));
      });
      bin.addEventListener('drop', e=>{
        e.preventDefault();
        const dragging = document.querySelector('.item.dragging');
        if(!dragging) return;
        const itemType = dragging.dataset.type;
        const accept = bin.dataset.accept;
        attempts++;
        if(itemType===accept){
          score += 10; remaining--; binFlash(bin,'correct'); dragging.remove();
        }else{
          score = Math.max(0, score-3); binFlash(bin,'wrong');
        }
        updateHUD();
        if(remaining===0){
          celebrate();
        }
      });
    }

    function binFlash(bin, cls){
      bin.classList.add(cls);
      setTimeout(()=>bin.classList.remove(cls),600);
    }

    function updateHUD(){
      scoreEl.textContent = score;
      attemptsEl.textContent = attempts;
      remainingEl.textContent = remaining;
    }

    function celebrate(){
      const msg = document.createElement('div');
      msg.style.position='fixed'; msg.style.inset='0'; msg.style.display='grid'; msg.style.placeItems='center';
      msg.style.background='rgba(0,0,0,.5)'; msg.style.zIndex='9999';
      msg.innerHTML = `<div class="card" style="padding:22px 26px;text-align:center">
        <h3>¬°Buen trabajo! ‚ôªÔ∏è</h3>
        <p>Clasificaste todos los residuos. Puntaje final: <strong>${score}</strong></p>
        <button class="btn" id="again">Jugar otra vez</button>
      </div>`;
      document.body.appendChild(msg);
      msg.querySelector('#again').addEventListener('click',()=>{ msg.remove(); newGame(); });
    }

    function newGame(){
      score=0; attempts=0; remaining=0; updateHUD();
      createItems();
    }

    function init(){
      createBins();
      newGame();
      btnNew.addEventListener('click', newGame);
      // legend
      const legend = document.querySelector('.legend');
      legend.innerHTML = CATEGORIES.map(c=>`<span style="border-color:${shade(c.color,-10)}">${c.emoji} ${c.name}</span>`).join('');
    }

    // util: color shade
    function shade(hex,percent){
      const num = parseInt(hex.slice(1),16);
      let r=(num>>16), g=(num>>8)&0x00FF, b=(num)&0x0000FF;
      r = Math.min(255, Math.max(0, Math.floor(r*(100+percent)/100)));
      g = Math.min(255, Math.max(0, Math.floor(g*(100+percent)/100)));
      b = Math.min(255, Math.max(0, Math.floor(b*(100+percent)/100)));
      return `#${(r<<16 | g<<8 | b).toString(16).padStart(6,'0')}`
    }

    init();
  </script>
</body>
</html>
